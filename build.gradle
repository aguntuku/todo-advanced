apply plugin: 'sonar-runner'

sonarRunner {
    sonarProperties {
		property 'sonar.projectName', 'todo'
		property 'sonar.projectDescription', 'A task management application'
    }
}

allprojects {
	apply plugin: 'idea'
	group = 'com.manning.gia'
	version = '0.1'
}

subprojects {
	apply plugin: 'java'	
	apply from: "$rootDir/gradle/jacoco.gradle"
	
	repositories {
		mavenCentral()
	}
	
	sonarRunner {
        sonarProperties {
            property 'sonar.sourceEncoding', 'UTF-8'

			project.tasks.withType(Test) { task ->
			    if(task.name == 'test') {
			        property 'sonar.jacoco.reportPath', task.jacoco.destFile
			    }
			    else if(task.name == 'integrationTest') {
			        property 'sonar.jacoco.itReportPath', task.jacoco.destFile
			    }
			}
        }
    }
}

task wrapper(type: Wrapper) {
    gradleVersion = '1.5-rc-3'
}